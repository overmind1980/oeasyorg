---
show: step
version: 1.0
enable_checker: true
---

# 编辑过程

## 回忆上次

- 我们上次了解了编辑过程
	- 修改的内容会保存到一个`swap`文件
	- 如果`swp`已经存在，会有个`swo`文件，以此类推
	- 替换文件可以进行对源文件的修复，没保存到源文件的可能保存到了替换文件
- 可以统一设置替换文件的位置
- 可以控制保存替换文件的触发条件
	- 字符数
	- 时间长度
- 其实我们更常见的是另存为命令进行备份，`vim`可以打开两个文件吗？🤔


### 查看手册📕

- `man vim`
	- 可以看到`vim`可以有多个参数 
- 在`terminal`里面直接运行`vim oeasy.txt o2z.txt`
- 或者`vim *.txt`
- 这样就会打开多个文件
- 每一个打开的文件是一个`buffer`缓冲区
- 可以在`vim`中用`:buffers`查看到目前打开的文件
- 可以`:h buffers`查看手册

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20210204-1612401121790)

### 切换buffers
- `:buffers` 可以查看所有缓冲
- `:ls`也可以查看所有缓冲,注意不是 `:!ls`，那是执行外部命令`ls`
- 可以查看手册`:ls`


![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20210204-1612406201062)

- 可以在打开帮助手册的情况下，`:ls!`，看到不在缓冲列表的缓冲
	- `+`   有修改未保存内容      
	- `-`   可修改标签关闭
	- `=`   只读缓冲区
	- `a`   活跃缓冲区                                         
	- `u`   没有在列表里面的缓冲区
	- `h`   隐藏缓冲区
	- `x`   有读取错误的缓冲区
	- `%`   当前缓冲区
	- `#`   有`swap`替换文件的缓冲区

- 可以通过`bn[ext]`,选择下一个`buffer`
- 可以通过`bN[ext]`,选择上一个`bufer`
- 可以用`b[uffer1]`、`b2`进入指定的 `buffer`
- 也可以用文件名，比如`b[uffer] oeasy.txt`
- 可以用`bf[irst]`，打开第一个`buffer`
- 可以用`bl[ast]`，打开最后一个`buffer`

### 强制跳转buffer

- 当我想跳转的时候，如果当前文件没有保存，他会不允许跳转
	- 只能先`:w`保存
	- 然后再跳转
- 如果我想强行跳转
	- `:b!2`
	- 这样当前文件没有直接保存到硬盘里，但`swap`中有
	- 如果想`:b2`的时候自动保存
	- 需要`:set autowrite`
	- 可以`:h autowrite`查看手册
- 也可以不保存强行退出当前`buffer`
	- `:q!`
	- 甚至不保存强行退出所有`buffer` `:qall!`
	- 也可以保存所有未保存的文件`:wall`
	- 全部保存并退出`:wqall`

### hidden的作用
- 在`terminal`中`vim`两个文件`a`、`b`
- `vim a b`
- 在`a`里面进行了修改
- 如果这个时候我想`:b2`切到第`2`个`buffer`
- 他会提示我要保存当前这个`a`
- 如果设置了`:set hidden`，这个可以直接切换
- `a`存在于`swap`已经修改，还没`w`的状态
- `:ls`可以看到两个都有`+`(未保存标记)
- 这个时候就可以`:wall`

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20210204-1612421985346)



## 总结

- 我们这次了解了缓冲区buffer
- `ls`可以查看`buffer`,如下是`buffer`缓冲的一些`flag`
 	- `+`   有修改未保存内容      
	- `-`   可修改标签关闭
	- `=`   只读缓冲区
	- `a`   活跃缓冲区                                         
	- `u`   没有在列表里面的缓冲区
	- `h`   隐藏缓冲区
	- `x`   有读取错误的缓冲区
	- `%`   当前缓冲区
	- `#`   有`swap`替换文件的缓冲区

- 可以在`buffer`跳转
	- 可以通过`bn[ext]`,选择下一个`buffer`
	- 可以用`b[uffer1]`、`b2`进入指定的 `buffer`
	- 也可以用文件名，比如`b[uffer] oeasy.txt`
	- 可以用`bf[irst]`，打开第一个`buffer`
	- 可以用`bl[ast]`，打开最后一个`buffer`
- 跳转的时候可以不强制保存
	- 设置`hidden`
- 关于强行跳转和保存退出
	- 强制跳转`:q!`
	- 不保存强行退出所有`buffer` `:qall!`
	- 保存所有未保存的文件`:wall`
	- 全部保存并退出`:wqall`
- `vim`两个文件，可以放到两个窗口里面打开吗？🤔
- 下次再说 👋






