---
show: step
version: 1.0
enable_checker: true
---

# 那啥在哪 whereis

## 回忆上次内容 😌

> 上次讲了 ls 的参数 (arguement) 和选项 (option) 的设置。

#### 现在我们要制作这样一个列表：🗒

- 对于 /proc 路径进行列表
- 对子路径递归列表
- 显示隐藏文件
- 显示详细信息
- 其中容量使用人们熟知的单位

**大家忘记了吗？！！😱**

- 没关系，我们可以查手册📕 

```
ls -lahR /proc
```

- 做完了之后可以思考
- ls 到底在哪？🤔

## ls 在哪？🤔

- 想要知道 ls 在哪就得用新命令 whereis
- 命令的参数是 ls
- 综合起来就是：

```shell
whereis ls
```


- 我们可以得到 ls 两个硬盘位置：

```properties
  /bin/ls
  /usr/share/man/man1/ls.1.gz
```

### 位置
- 为什么 ls 在硬盘里？🤔
- `ls` 文件最开始在 `/bin` 这个位置
- 当我在命令行敲击之后 `ls` 回车之后
- 操作系统要求运行 `ls` 程序
- 操作系统分配内存空间给 `ls`
- 操作系统把 `ls` 从硬盘加载到内存中
- 操作系统分配 cpu 资源去执行程序
- 最终把 `ls` 的结果输出到标准输出流（屏幕）上
- 为什么 ls 命令对应两个位置呢 🤔
### 位置

- 第一个看起来是命令的位置
- 第二个看起来是一个文件
- 而且像一个man 型的帮助手册
- 把他当做参数man一下
- 失败了
- 怎么办？

### 搜索打开gz
![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20210910-1631238746539)

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20210910-1631239299640)

- 然后去目录底下找到cat一下
- 可以看到确实是帮助！
- 再找个命令
- 我们可以对 whereis 发出询问

### 命令
```shell
whatis whereis
```
  
> whereis 可以帮我们定位命令的位置

但是 whereis 描述太简单了，我们可以查询 whereis 的手册 man：📕

```shell
man whereis
```

我们可以查询到 whereis 的具体内容：📕

![Image text](https://labfile.oss.aliyuncs.com/courses/2712/whereis.png)

- 走
- 试试选项的功能

### 二进制

```shell
whereis -b ls
```

- b 的意思是 binary 二进制
- 查找 whereis 二进制
- 二进制文件在/bin 里

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20210910-1631239617122)

### 文档

```shell
whereis -m ls
```

- m 的意思是 manual 文档
- 查找 whereis 的文档
- 文档在/usr/share/man 里面

- 总结来说：`whereis -b ls` 是二进制命令
- `whereis -m` 另一个是帮助手册
- 这系统不是开源的么
- 那 ls 的源文件在哪呢？
- 这有点复杂...🧐

### 先查找 apt 的源

- dpkg -S /bin/ls
  - dpkg 是 Debian Package 是 Debian 的包管理命令
  - -S 是在已经安装的包里面查找 search
  - /bin/ls 是具体文件的位置
  - 得到结果是 coreutils（核心应用）

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20210910-1631239752764)
### 设置源

```shell
sudo vi /etc/apt/sources.list
```

  1. 打开源的apt配置文件
  0. apt 是高级包管理的命令
  0. sudo 是使用管理员权限
    - vi 是文本编辑器
    - `/etc/apt/sources.list` 是源的配置文件
    - 目前的光标在第一行
  0. 依次输入 <kbd>4</kbd><kbd>G</kbd>
    - 移动光标直接到第四行
    - 光标在行首

![source](https://labfile.oss.aliyuncs.com/courses/2712/changeSource.png)

  5. 输入2个 <kbd>x</kbd>
    - 删除两个字符
    - 取消注释
    - 确认deb-src源的位置
  0. 依次摁下
    - <kbd>:</kbd>
    - <kbd>w</kbd>
    - <kbd>q</kbd>
    - <kbd>回车</kbd>
    - 保存并退出 vi
    
### 用 apt 下载源代码


```shell
#运行 `sudo apt update`（更新源）
sudo apt update
#获得源代码，注意结尾有s
sudo apt source coreutils
#在当前文件夹下找到 `coreutilsXXX` 文件夹
ls coreutils*
#8.25是对应的软件包的版本号
#可能和您对应的不一样
#cd 进入这个文件夹
cd coreutils-8.25
```
![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20210910-1631239978617)
### 找
```
#查看一下 coreutils-8.25 下有什么
ls 
#进入 `src` 源文件文件夹 (source)
cd src
#查看一下 src 下有什么
ls 
#再次文件夹查找ls的文件
#找到了 `ls.c` 文件 (ls 的 c 语言源文件）
#ls ls.*
```
![ls Source](https://labfile.oss.aliyuncs.com/courses/2712/listsourcefile.png)

### 查看

```
#查看这个源文件
vi ls.c
```

- 别小看一个ls
- 居然有4000多行

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20210910-1631240124547)

- `:q`可以退出

### 总结思考 🤔
- 这次是where
- 可以找到命令的位置
- 命令有三种位置
	- 二进制代码 binary
	- 源代码 source
	- 帮助手册 manual
- 我们真的可以获得 ls 源代码
- 这太棒了！👊 
- 可是如果有多个版本的命令比如：
	- python2
	- python3 
- 那我到底用的是那个版本的 java 呢？
- 我们下次再说。 👋
